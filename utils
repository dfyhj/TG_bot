import random

def is_volatile(analysis):
    try:
        return calculate_volatility(analysis) >= 1.0
    except Exception:
        return False

def calculate_volatility(analysis):
    try:
        high = analysis.indicators.get("high")
        low = analysis.indicators.get("low")
        if high is None or low is None:
            return 0.0
        return abs(high - low) / low * 100
    except:
        return 0.0

def get_signal_history_text(history):
    if not history:
        return "–ò—Å—Ç–æ—Ä–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—É—Å—Ç–∞."

    text = "<b>–ò—Å—Ç–æ—Ä–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤:</b>\n"
    for i, (pair, tf, direction, result) in enumerate(history[-10:], 1):
        emoji = "üü¢" if result == "—É—Å–ø–µ—à–Ω—ã–π" else "üî¥" if result == "–Ω–µ—É—Å–ø–µ—à–Ω—ã–π" else "üü°"
        text += f"{i}. {emoji} {pair}, {tf}, {direction}, —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {result}\n"
    return text

def get_education_text():
    return (
        "<b>–û–±—É—á–µ–Ω–∏–µ:</b>\n\n"
        "–Ø –∏—Å–ø–æ–ª—å–∑—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä—ã–Ω–∫–∞, –≤–∫–ª—é—á–∞—è:\n"
        "- RSI + –°—Ç–æ—Ö–∞—Å—Ç–∏–∫\n"
        "- MACD + RSI\n"
        "- –ü–æ–ª–æ—Å—ã –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞ + –ü—Ä–∞–π—Å —ç–∫—à–Ω\n"
        "- SMA –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è\n"
        "- Heiken Ashi + –°—Ç–æ—Ö–∞—Å—Ç–∏–∫\n\n"
        "–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —Å–∏–≥–Ω–∞–ª–∞, —è –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä—ã–Ω–æ–∫ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é —Å–∏–≥–Ω–∞–ª —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.\n"
        "–¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω —Ñ–∏–ª—å—Ç—Ä –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –∞–≤—Ç–æ–ø–æ–∏—Å–∫ –º–æ–º–µ–Ω—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏."
    )

def get_bot_info_text():
    return (
        "<b>–û –±–æ—Ç–µ:</b>\n"
        "–≠—Ç–æ—Ç –±–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä—ã–Ω–æ–∫ –ø–æ 5 —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º –∏ –≤—ã–¥–∞—ë—Ç —Å–∏–≥–Ω–∞–ª—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.\n"
        "–í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –≤–∞–ª—é—Ç–Ω—É—é –ø–∞—Ä—É –∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º, –≤–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è.\n"
        "–í—Å–µ —Å–∏–≥–Ω–∞–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö —Å TradingView."
    )
